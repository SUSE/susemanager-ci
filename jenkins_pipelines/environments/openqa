#!/usr/bin/env groovy

node('sumaform-cucumber') {
    properties([
        buildDiscarder(logRotator(numToKeepStr: '5', daysToKeepStr: '30', artifactNumToKeepStr: '3')),
        disableConcurrentBuilds(),
        parameters([
            choice(name: 'Installation_Type', choices: ['online', 'offline'], description: 'Select the type of installation you want, with SCC registration it uses Online, without SCC it uses Offline'),
            string(
              name: 'ISO_URL',
              defaultValue: '',
              description: 'Enter the URL of the image you want to test in http, NOT https'
            )
        ])
    ])

    stage('Checkout pipeline') {
        checkout scm
    }
    def pipeline = load "jenkins_pipelines/environments/common/openqa.groovy"
    pipeline.run(params)
}
