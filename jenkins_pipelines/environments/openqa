#!/usr/bin/env groovy

node('sumaform-cucumber-provo') {
    properties([
        buildDiscarder(logRotator(numToKeepStr: '5', daysToKeepStr: '30', artifactNumToKeepStr: '3')),
        disableConcurrentBuilds(),
        parameters([
          parameters {
            choice(
              name: 'Installation Type',
              choices: ['Online', 'Offline'],
              description: 'Select the type of installation'
            )
            string(
              name: 'ISO_URL',
              defaultValue: '',
              description: 'Enter the URL of the image you want to test in http, NOT https'
            )
          }
        ])
    ])

    stage('Checkout pipeline') {
        checkout scm
    }
    def pipeline = load "jenkins_pipelines/environments/common/openqa.groovy"
    pipeline.run(params)
}
